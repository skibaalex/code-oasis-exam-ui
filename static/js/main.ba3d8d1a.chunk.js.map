{"version":3,"sources":["api/index.js","context/Auth.js","helpers/objFromArray.js","context/Books.js","components/Header/index.js","components/Loginodal/index.js","components/BookCard/BookCard.js","pages/Home.js","components/BookAccordion/index.js","components/ConfirmationDialog/index.js","components/NewEditBook/index.js","pages/Admin.js","App.js","reportWebVitals.js","index.js"],"names":["api","axios","create","baseURL","setToken","token","localStorage","setItem","interceptors","request","use","config","headers","error","Promise","reject","removeItem","initialAuthState","isAuthenticated","isInitialised","showLogin","user","AuthContext","createContext","login","resolve","logout","register","toggleLogin","AuthReducer","state","action","type","payload","Error","AuthProvider","children","useReducer","dispatch","a","username","password","post","response","data","console","log","message","getUser","useEffect","window","getItem","get","initialise","Provider","value","objFromArray","arr","key","reduce","accumulator","current","initialBooksState","booksByIDs","allBookIDs","myBooks","searchResult","BooksContext","buyBook","createBook","searchBooks","updateBook","BooksReducer","books","Object","keys","bookId","_","union","_id","values","omit","pull","book","push","BooksProvider","useContext","put","then","res","deleteBook","delete","query","length","useStyles","makeStyles","theme","grow","flexGrow","menuButton","marginRight","spacing","title","display","breakpoints","up","search","position","borderRadius","shape","backgroundColor","fade","palette","common","white","marginLeft","width","searchIcon","padding","height","pointerEvents","alignItems","justifyContent","inputRoot","color","inputInput","paddingLeft","transition","transitions","sectionDesktop","sectionMobile","Header","classes","React","useState","anchorEl","setAnchorEl","mobileMoreAnchorEl","setMobileMoreAnchorEl","setQuery","isMenuOpen","Boolean","isMobileMenuOpen","handleProfileMenuOpen","event","currentTarget","handleMobileMenuClose","handleMenuClose","history","useHistory","menuId","renderMenu","Menu","anchorOrigin","vertical","horizontal","id","keepMounted","transformOrigin","open","onClose","admin","MenuItem","onClick","renderMobileMenu","IconButton","aria-label","aria-controls","aria-haspopup","className","AppBar","style","marginBottom","Toolbar","maxWidth","ButtonBase","Typography","variant","noWrap","InputBase","placeholder","onChange","ev","setTimeout","target","root","input","inputProps","edge","Button","LoginModal","setUsername","setPassword","err","setErr","handleLogin","handleClose","Dialog","aria-labelledby","DialogTitle","DialogContent","DialogContentText","Box","pt","TextField","autoFocus","margin","label","py","DialogActions","paper","image","img","maxHeight","alignSelf","buyBookContainer","alignContent","flexDirection","BookCard","buyNow","purchaseBook","author","publisher","name","description","cover","Card","alt","src","gutterBottom","Grid","item","direction","fontSize","price","Home","authIsInitialised","renderSkeleton","p","container","map","x","i","Skeleton","mt","Divider","BookAccordion","handleChange","handleEdit","handleDelete","Accordion","expanded","AccordionSummary","expandIcon","AccordionDetails","xs","size","ConfirmationDialog","handleChoice","NewEditBook","show","toggleShow","initialValues","setInitialValues","setId","undefined","validate","errors","onSubmit","setSubmitting","touched","handleSubmit","handleBlur","isSubmitting","fullWidth","multiline","startAdornment","InputAdornment","flex","helperText","AdminPage","setExpanded","showEdit","setShowEdit","editBook","setEditBook","showDeleteConfirmation","setShowDeleteConfirmaion","panel","isExpanded","startIcon","choice","AdminRoute","rest","render","location","to","pathname","from","App","Container","path","Admin","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","createMuiTheme","primary","main","ReactDOM","StrictMode","ThemeProvider","document","getElementById"],"mappings":"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","file":"static/js/main.ba3d8d1a.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nconst api = axios.create({\r\n    baseURL: \"https://codeoasis.herokuapp.com/\"\r\n});\r\n\r\nexport const setToken = (token) => {\r\n    if (token) {\r\n        localStorage.setItem('auth-token', token)\r\n        api.interceptors.request.use(\r\n            function (config) {\r\n                config.headers[\"auth-token\"] = token;\r\n                return config;\r\n            },\r\n            function (error) {\r\n                return Promise.reject(error);\r\n            }\r\n        );\r\n    } else {\r\n        localStorage.removeItem('auth-token');\r\n        api.interceptors.request.use(\r\n            function (config) {\r\n                config.headers[\"auth-token\"] = null;\r\n                return config;\r\n            },\r\n            function (error) {\r\n                return Promise.reject(error);\r\n            }\r\n        );\r\n    }\r\n}\r\n\r\nexport default api;","import React, { createContext, useEffect, useReducer } from 'react'\r\nimport api, { setToken } from '../api'\r\n\r\nconst initialAuthState = {\r\n    isAuthenticated: false,\r\n    isInitialised: false,\r\n    showLogin: false,\r\n    user: null\r\n};\r\n\r\n\r\nconst AuthContext = createContext({\r\n    ...initialAuthState,\r\n    login: () => Promise.resolve(),\r\n    logout: () => { },\r\n    register: () => Promise.resolve(),\r\n    toggleLogin: () => { }\r\n})\r\n\r\nconst AuthReducer = (state, action) => {\r\n    switch (action.type) {\r\n        case 'INITIALISE': {\r\n            const { isAuthenticated, user } = action.payload;\r\n            return {\r\n                ...state,\r\n                isAuthenticated,\r\n                isInitialised: true,\r\n                showLogin: false,\r\n                user\r\n            };\r\n        }\r\n        case 'LOGIN': {\r\n            const { user } = action.payload;\r\n            return {\r\n                ...state,\r\n                isAuthenticated: true,\r\n                user\r\n            };\r\n        }\r\n        case 'LOGOUT': {\r\n            return {\r\n                ...state,\r\n                isAuthenticated: false,\r\n                user: null\r\n            };\r\n        }\r\n        case 'REGISTER': {\r\n            const { user } = action.payload;\r\n            return {\r\n                ...state,\r\n                isAuthenticated: true,\r\n                user\r\n            };\r\n        }\r\n        case 'UPDATE_USER': {\r\n            const { user } = action.payload\r\n            return {\r\n                ...state,\r\n                user\r\n            }\r\n        }\r\n        case 'TOGGLE_LOGIN': {\r\n            return {\r\n                ...state,\r\n                showLogin: !state.showLogin\r\n            }\r\n        }\r\n        default: {\r\n            throw new Error('Action type was not found.')\r\n        }\r\n\r\n    }\r\n}\r\n\r\n\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n    const [state, dispatch] = useReducer(AuthReducer, { initialAuthState })\r\n\r\n\r\n    const login = async ({ username, password }) => {\r\n        try {\r\n            const response = await api.post('/auth/login', { username, password })\r\n            const { token, user } = response.data;\r\n            setToken(token);\r\n            dispatch({\r\n                type: 'LOGIN',\r\n                payload: {\r\n                    user\r\n                }\r\n            });\r\n        } catch (err) {\r\n            console.log(err.response.data.message)\r\n            return err.response.data.message\r\n        }\r\n\r\n    };\r\n\r\n    const logout = () => {\r\n        setToken(null);\r\n        dispatch({ type: 'LOGOUT' });\r\n    };\r\n\r\n    const register = async ({ username, password }) => {\r\n        const response = await api.post('/api/account/register', {\r\n            username,\r\n            password\r\n        });\r\n        const { token } = response.data;\r\n        setToken(token)\r\n        const { user } = await getUser()\r\n        dispatch({\r\n            type: 'REGISTER',\r\n            payload: {\r\n                user\r\n            }\r\n        });\r\n    };\r\n\r\n    const toggleLogin = () => {\r\n        dispatch({\r\n            type: 'TOGGLE_LOGIN'\r\n        })\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n        const initialise = async () => {\r\n            try {\r\n                const token = window.localStorage.getItem('auth-token');\r\n                if (token) {\r\n                    setToken(token);\r\n\r\n                    const response = await api.get('/auth/user');\r\n                    const user = response.data;\r\n\r\n                    dispatch({\r\n                        type: 'INITIALISE',\r\n                        payload: {\r\n                            isAuthenticated: true,\r\n                            user\r\n                        }\r\n                    });\r\n                } else {\r\n                    dispatch({\r\n                        type: 'INITIALISE',\r\n                        payload: {\r\n                            isAuthenticated: false,\r\n                            user: null\r\n                        }\r\n                    });\r\n                }\r\n            } catch (err) {\r\n                dispatch({\r\n                    type: 'INITIALISE',\r\n                    payload: {\r\n                        isAuthenticated: false,\r\n                        user: null\r\n                    }\r\n                });\r\n            }\r\n        };\r\n\r\n        initialise();\r\n    }, []);\r\n\r\n    return (\r\n        <AuthContext.Provider\r\n            value={{\r\n                ...state,\r\n                login,\r\n                logout,\r\n                register,\r\n                toggleLogin\r\n            }}\r\n        >\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n\r\nexport default AuthContext;\r\n\r\n\r\nconst getUser = async () => {\r\n    try {\r\n        const user = (await api.get('/auth/user')).data\r\n        console.log(user)\r\n        return user\r\n    } catch (err) {\r\n        console.log(err)\r\n    }\r\n}\r\n\r\n","const objFromArray = (arr, key = '_id') => arr.reduce((accumulator, current) => {\r\n    accumulator[current[key]] = current;\r\n    return accumulator;\r\n}, {});\r\n\r\nexport default objFromArray;","import React, { createContext, useContext, useEffect, useReducer } from 'react'\r\nimport api from '../api'\r\nimport AuthContext from './Auth';\r\nimport objFromArray from '../helpers/objFromArray'\r\nimport _ from 'lodash';\r\n\r\nconst initialBooksState = {\r\n    isInitialised: false,\r\n    booksByIDs: null,\r\n    allBookIDs: null,\r\n    myBooks: null,\r\n    searchResult: null\r\n};\r\n\r\n\r\nconst BooksContext = createContext({\r\n    ...initialBooksState,\r\n    buyBook: () => Promise.resolve(),\r\n    createBook: () => Promise.resolve(),\r\n    searchBooks: () => Promise.resolve(),\r\n    updateBook: () => Promise.resolve()\r\n\r\n})\r\n\r\nconst BooksReducer = (state, action) => {\r\n\r\n    switch (action.type) {\r\n        case 'INITIALISE': {\r\n            const { books, myBooks } = action.payload;\r\n            const booksByIDs = objFromArray(books ? books : {})\r\n            const allBookIDs = books ? Object.keys(booksByIDs) : []\r\n            return {\r\n                ...state,\r\n                isInitialised: true,\r\n                booksByIDs,\r\n                allBookIDs,\r\n                myBooks\r\n            };\r\n        }\r\n        case 'BUY_BOOK': {\r\n            const { bookId } = action.payload;\r\n            state.myBooks = _.union(state.myBooks, [bookId])\r\n            return {\r\n                ...state,\r\n            };\r\n        }\r\n        case 'UPDATE_BOOK': {\r\n            const { _id, values } = action.payload;\r\n            state.booksByIDs[_id] = { ...values }\r\n            return {\r\n                ...state\r\n            }\r\n        }\r\n        case 'DELETE_BOOK': {\r\n            const { _id } = action.payload;\r\n            state.booksByIDs = _.omit(state.booksByIDs, _id)\r\n            state.allBookIDs = _.pull(state.allBookIDs, _id)\r\n            return { ...state }\r\n        }\r\n        case 'CREATE_BOOK': {\r\n            const { book } = action.payload;\r\n\r\n            state.booksByIDs[book._id] = book\r\n            state.allBookIDs.push(book._id)\r\n            console.log(state)\r\n            return { ...state }\r\n        }\r\n        case 'SEARCH_BOOKS': {\r\n            const { searchResult } = action.payload;\r\n            state.searchResult = searchResult\r\n            return {\r\n                ...state\r\n            }\r\n        }\r\n        default: {\r\n            throw new Error('Action type was not found.')\r\n        }\r\n\r\n    }\r\n}\r\n\r\n\r\n\r\nexport const BooksProvider = ({ children }) => {\r\n    const [state, dispatch] = useReducer(BooksReducer, initialBooksState)\r\n    const { isAuthenticated } = useContext(AuthContext)\r\n    const buyBook = (bookId) => {\r\n        api.post('/books/purchase', { bookId }).then(res => {\r\n            dispatch({\r\n                type: 'BUY_BOOK',\r\n                payload: { bookId }\r\n            })\r\n        })\r\n    }\r\n\r\n    const updateBook = async ({ _id, values }) => {\r\n        api.put('books/update', { _id, values }).then(res => {\r\n            dispatch({\r\n                type: 'UPDATE_BOOK',\r\n                payload: {\r\n                    _id,\r\n                    values\r\n                }\r\n            })\r\n        })\r\n    }\r\n\r\n    const deleteBook = async ({ _id }) => {\r\n        try {\r\n            const deleted = await api.delete(`/books/delete/${_id}`)\r\n            dispatch({\r\n                type: 'DELETE_BOOK',\r\n                payload: {\r\n                    _id\r\n                }\r\n            })\r\n        } catch (err) {\r\n            console.error(err)\r\n        }\r\n\r\n    }\r\n\r\n    const createBook = async ({ values }) => {\r\n        try {\r\n            const book = (await api.post('books/create', values)).data\r\n            dispatch({\r\n                type: 'CREATE_BOOK',\r\n                payload: {\r\n                    book\r\n                }\r\n            })\r\n        } catch (err) {\r\n            console.error(err)\r\n        }\r\n    }\r\n\r\n    const searchBooks = async ({ query }) => {\r\n        if (query.length) {\r\n            try {\r\n                const searchResult = (await api.get(`books/query/${query}`)).data\r\n\r\n                dispatch({\r\n                    type: 'SEARCH_BOOKS',\r\n                    payload: { searchResult }\r\n                })\r\n            } catch (err) {\r\n                console.error(err)\r\n            }\r\n        } else {\r\n            dispatch({\r\n                type: 'SEARCH_BOOKS',\r\n                payload: { searchResult: null }\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n    useEffect(() => {\r\n        const initialise = async () => {\r\n            try {\r\n                const response = await api.get('/books');\r\n                const myBooks = isAuthenticated ? (await api.get('/books/myBooks')).data : []\r\n                const books = response.data;\r\n                dispatch({\r\n                    type: 'INITIALISE',\r\n                    payload: {\r\n                        isAuthenticated: true,\r\n                        books,\r\n                        myBooks\r\n                    }\r\n                });\r\n            } catch (err) {\r\n                console.error(err);\r\n                dispatch({\r\n                    type: 'INITIALISE',\r\n                    payload: {\r\n                        books: null,\r\n                        myBooks: null\r\n                    }\r\n                });\r\n            }\r\n        };\r\n\r\n        initialise();\r\n    }, []);\r\n\r\n    return (\r\n        <BooksContext.Provider\r\n            value={{\r\n                ...state,\r\n                buyBook,\r\n                updateBook,\r\n                deleteBook,\r\n                createBook,\r\n                searchBooks\r\n            }}\r\n        >\r\n            {children}\r\n        </BooksContext.Provider>\r\n    );\r\n};\r\n\r\nexport default BooksContext;\r\n","import React, { useContext, useState } from 'react';\r\nimport { fade, makeStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport InputBase from '@material-ui/core/InputBase';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport AccountCircle from '@material-ui/icons/AccountCircle';\r\nimport AuthContext from '../../context/Auth';\r\nimport { Button, ButtonBase } from '@material-ui/core';\r\nimport { Redirect, useHistory } from 'react-router-dom';\r\nimport BooksContext from '../../context/Books';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    grow: {\r\n        flexGrow: 1,\r\n    },\r\n    menuButton: {\r\n        marginRight: theme.spacing(2),\r\n    },\r\n    title: {\r\n        display: 'none',\r\n        [theme.breakpoints.up('sm')]: {\r\n            display: 'block',\r\n        },\r\n    },\r\n    search: {\r\n        position: 'relative',\r\n        borderRadius: theme.shape.borderRadius,\r\n        backgroundColor: fade(theme.palette.common.white, 0.15),\r\n        '&:hover': {\r\n            backgroundColor: fade(theme.palette.common.white, 0.25),\r\n        },\r\n        marginRight: theme.spacing(2),\r\n        marginLeft: 0,\r\n        width: '100%',\r\n        [theme.breakpoints.up('sm')]: {\r\n            marginLeft: theme.spacing(3),\r\n            width: 'auto',\r\n        },\r\n    },\r\n    searchIcon: {\r\n        padding: theme.spacing(0, 2),\r\n        height: '100%',\r\n        position: 'absolute',\r\n        pointerEvents: 'none',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n    },\r\n    inputRoot: {\r\n        color: 'inherit',\r\n    },\r\n    inputInput: {\r\n        padding: theme.spacing(1, 1, 1, 0),\r\n        // vertical padding + font size from searchIcon\r\n        paddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\r\n        transition: theme.transitions.create('width'),\r\n        width: '100%',\r\n        [theme.breakpoints.up('md')]: {\r\n            width: '20ch',\r\n        },\r\n    },\r\n    sectionDesktop: {\r\n        display: 'none',\r\n        [theme.breakpoints.up('md')]: {\r\n            display: 'flex',\r\n        },\r\n    },\r\n    sectionMobile: {\r\n        display: 'flex',\r\n        [theme.breakpoints.up('md')]: {\r\n            display: 'none',\r\n        },\r\n    },\r\n}));\r\n\r\nexport default function Header() {\r\n    const classes = useStyles();\r\n    const [anchorEl, setAnchorEl] = React.useState(null);\r\n    const [mobileMoreAnchorEl, setMobileMoreAnchorEl] = React.useState(null);\r\n\r\n    const [query, setQuery] = useState()\r\n    const { searchBooks } = useContext(BooksContext)\r\n\r\n    const handleSearch = (ev) => {\r\n        if (query) {\r\n            setTimeout(\r\n                searchBooks({ query: ev.target.value }), 300)\r\n        } else {\r\n            searchBooks({ query: ev.target.value })\r\n        }\r\n        setQuery(ev.target.value)\r\n\r\n    }\r\n\r\n\r\n    const isMenuOpen = Boolean(anchorEl);\r\n    const isMobileMenuOpen = Boolean(mobileMoreAnchorEl);\r\n\r\n    const handleProfileMenuOpen = (event) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const handleMobileMenuClose = () => {\r\n        setMobileMoreAnchorEl(null);\r\n    };\r\n\r\n    const handleMenuClose = () => {\r\n        setAnchorEl(null);\r\n        handleMobileMenuClose();\r\n    };\r\n\r\n    const handleMobileMenuOpen = (event) => {\r\n        setMobileMoreAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const { isAuthenticated, user, toggleLogin, logout } = useContext(AuthContext);\r\n    const history = useHistory();\r\n\r\n    const menuId = 'primary-search-account-menu';\r\n    const renderMenu = (\r\n        <Menu\r\n            anchorEl={anchorEl}\r\n            anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n            id={menuId}\r\n            keepMounted\r\n            transformOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n            open={isMenuOpen}\r\n            onClose={handleMenuClose}\r\n        >\r\n            {isAuthenticated && user?.admin && <MenuItem onClick={() => { handleMenuClose(); history.push('admin') }}>Admin</MenuItem>}\r\n            <MenuItem onClick={() => { logout(); handleMenuClose() }}>Logout</MenuItem>\r\n        </Menu>\r\n    );\r\n\r\n    const mobileMenuId = 'primary-search-account-menu-mobile';\r\n    const renderMobileMenu = (\r\n        <Menu\r\n            anchorEl={mobileMoreAnchorEl}\r\n            anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n            id={mobileMenuId}\r\n            keepMounted\r\n            transformOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n            open={isMobileMenuOpen}\r\n            onClose={handleMobileMenuClose}\r\n        >\r\n            <MenuItem onClick={handleProfileMenuOpen}>\r\n                <IconButton\r\n                    aria-label=\"account of current user\"\r\n                    aria-controls=\"primary-search-account-menu\"\r\n                    aria-haspopup=\"true\"\r\n                    color=\"inherit\"\r\n                >\r\n                    <AccountCircle />\r\n                </IconButton>\r\n                <p>Profile</p>\r\n            </MenuItem>\r\n        </Menu>\r\n    );\r\n\r\n    return (\r\n        <div className={classes.grow}>\r\n            <AppBar position=\"static\" style={{ marginBottom: 16, backgroundColor: '#5DB446' }}>\r\n                <Toolbar maxWidth=\"lg\">\r\n                    <ButtonBase onClick={() => history.push('')}>\r\n                        <Typography className={classes.title} variant=\"h6\" noWrap>\r\n                            Book Store\r\n                    </Typography>\r\n                    </ButtonBase>\r\n                    <div className={classes.search}>\r\n                        <div className={classes.searchIcon}>\r\n                            <SearchIcon />\r\n                        </div>\r\n                        <InputBase\r\n                            placeholder=\"Searchâ€¦\"\r\n                            onChange={handleSearch}\r\n                            value={query}\r\n                            classes={{\r\n                                root: classes.inputRoot,\r\n                                input: classes.inputInput,\r\n                            }}\r\n                            inputProps={{ 'aria-label': 'search' }}\r\n                        />\r\n                    </div>\r\n                    <div className={classes.grow} />\r\n                    <div className={classes.sectionDesktop}>\r\n                        {isAuthenticated ? <IconButton\r\n                            edge=\"end\"\r\n                            aria-label=\"account of current user\"\r\n                            aria-controls={menuId}\r\n                            aria-haspopup=\"true\"\r\n                            onClick={handleProfileMenuOpen}\r\n                            color=\"inherit\"\r\n                        >\r\n                            <AccountCircle />\r\n                        </IconButton> :\r\n                            <Button onClick={toggleLogin}>\r\n                                <Typography color=\"#fff\">\r\n                                    Login\r\n                                </Typography>\r\n                            </Button>\r\n                        }\r\n                    </div>\r\n                </Toolbar>\r\n            </AppBar>\r\n            {renderMobileMenu}\r\n            {renderMenu}\r\n        </div>\r\n    );\r\n}","import { Box, Dialog, DialogTitle, DialogContent, DialogContentText, TextField, DialogActions, Button, Typography } from '@material-ui/core';\r\nimport React, { useContext, useState } from 'react'\r\nimport AuthContext from '../../context/Auth'\r\n\r\n\r\nconst LoginModal = () => {\r\n    const { login, showLogin, toggleLogin } = useContext(AuthContext);\r\n    const [username, setUsername] = useState()\r\n    const [password, setPassword] = useState()\r\n    const [err, setErr] = useState()\r\n\r\n\r\n    const handleLogin = async () => {\r\n        const err = await login({ username, password })\r\n        if (err) return setErr(err)\r\n        handleClose()\r\n    }\r\n\r\n    const handleClose = () => {\r\n        setUsername('');\r\n        setPassword('');\r\n        setErr('')\r\n        toggleLogin()\r\n    }\r\n\r\n    return (\r\n        <Dialog open={showLogin} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\r\n            <DialogTitle id=\"form-dialog-title\">Login</DialogTitle>\r\n            <DialogContent>\r\n                <DialogContentText>\r\n                    <Typography>User login: user user</Typography>\r\n                    <Typography>Admin login: admin admin</Typography>\r\n                </DialogContentText>\r\n                {err && <Typography color=\"red\" variant=\"caption\">{err}</Typography>}\r\n                <Box pt={2}>\r\n                    <TextField\r\n                        autoFocus\r\n                        margin=\"dense\"\r\n                        id=\"username\"\r\n                        label=\"Username\"\r\n                        type=\"text\"\r\n                        value={username}\r\n                        onChange={ev => setUsername(ev.target.value)}\r\n                    />\r\n                </Box>\r\n                <Box py={2}>\r\n                    <TextField\r\n                        margin=\"dense\"\r\n                        id=\"password\"\r\n                        label=\"Password\"\r\n                        type=\"text\"\r\n                        value={password}\r\n                        onChange={ev => setPassword(ev.target.value)}\r\n                    />\r\n                </Box>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={handleLogin} color=\"primary\">\r\n                    Login\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    )\r\n}\r\n\r\nexport default LoginModal;","import React, { useContext, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { Button, Box, Card } from '@material-ui/core';\r\nimport BooksContext from '../../context/Books';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    paper: {\r\n        padding: theme.spacing(2),\r\n        maxWidth: 200,\r\n    },\r\n    image: {\r\n        width: 256,\r\n        height: 256,\r\n    },\r\n    img: {\r\n        display: 'block',\r\n        maxWidth: '100%',\r\n        maxHeight: '100%',\r\n        height: '100%',\r\n        alignSelf: 'center'\r\n    },\r\n    buyBookContainer: {\r\n        justifyContent: 'center',\r\n        alignContent: 'center',\r\n        alignItems: 'center',\r\n        flexDirection: 'row'\r\n    }\r\n}));\r\n\r\nconst BookCard = ({ book, purchaseBook, buyNow }) => {\r\n    const classes = useStyles();\r\n    const { author, publisher, description, name, cover, _id } = book\r\n    const { buyBook } = useContext(BooksContext)\r\n    return (\r\n        <Card className={classes.paper}>\r\n            <Box style={{ justifyContent: 'space-around', flexDirection: 'row', height: '100%', alignItems: 'center' }}>\r\n                <Box className={classes.image}>\r\n                    <img className={classes.img} alt={name} src={cover} />\r\n                </Box>\r\n                <Box style={{ justifyContent: 'center', alignItems: 'center' }}>\r\n                    <Typography gutterBottom variant=\"subtitle2\">\r\n                        {name}\r\n                    </Typography>\r\n\r\n                </Box>\r\n            </Box>\r\n            <Grid item direction=\"column\" spacing={2}>\r\n                <Typography style={{ fontSize: 10 }} variant=\"body2\" color=\"textSecondary\">\r\n                    PUBLISHED BY: {publisher}\r\n                </Typography>\r\n                <Typography gutterBottom variant=\"overline\">\r\n                    {author}\r\n                </Typography>\r\n\r\n                {buyNow &&\r\n                    <Box>\r\n                        <Typography variant=\"subtitle2\">${book.price}</Typography>\r\n                        <Button variant=\"contained\" onClick={() => buyBook(_id)}>Buy Now</Button>\r\n                    </Box>\r\n                }\r\n            </Grid>\r\n        </Card>\r\n    );\r\n}\r\n\r\nexport default BookCard;","import { Box, Divider, Grid, Typography } from '@material-ui/core';\r\nimport React, { useContext } from 'react';\r\nimport BookCard from '../components/BookCard/BookCard';\r\nimport BooksContext from '../context/Books';\r\nimport { Redirect, useHistory } from 'react-router-dom';\r\nimport { Skeleton } from '@material-ui/lab';\r\nimport AuthContext from '../context/Auth';\r\n\r\nconst Home = () => {\r\n    const { booksByIDs, allBookIDs, purchaseBook, myBooks, searchResult, isInitialised } = useContext(BooksContext)\r\n    const { isInitialised: authIsInitialised } = useContext(AuthContext)\r\n    const renderBooks = () => (\r\n        <Box p={3}>\r\n            {searchResult ?\r\n                <Grid spacing={3} direction=\"row\" container>\r\n                    {searchResult && searchResult.map(book => (\r\n                        <Grid item key={book._id}>\r\n                            <BookCard purchaseBook={purchaseBook} book={book} />\r\n                        </Grid>\r\n                    ))}\r\n                </Grid>\r\n                :\r\n                <Grid spacing={3} direction=\"row\" container>\r\n                    {allBookIDs && allBookIDs.map(id => (\r\n                        <Grid item key={id}>\r\n                            <BookCard buyNow purchaseBook={purchaseBook} book={booksByIDs[id]} />\r\n                        </Grid>\r\n                    ))}\r\n                </Grid>\r\n            }\r\n            {searchResult && !searchResult.length &&\r\n                <Box>\r\n                    <Typography variant=\"subtitle2\">No Matches Found</Typography>\r\n                </Box>\r\n            }\r\n        </Box>\r\n    )\r\n\r\n\r\n    const renderMyBooks = () => (\r\n        <Box padding={3}>\r\n            <Grid spacing={3} direction=\"row\" container>\r\n                {myBooks?.length ? myBooks.map(id => (\r\n                    <Grid item key={id}>\r\n                        <BookCard purchaseBook={purchaseBook} book={booksByIDs[id]} />\r\n                    </Grid>\r\n                )) : <Typography variant=\"caption\">No Books were puchased yet</Typography>}\r\n            </Grid>\r\n        </Box>\r\n    )\r\n\r\n    const renderSkeleton = () => (\r\n        <Box p={3}>\r\n            <Grid spacing={3} direction=\"row\" container>\r\n                {[1, 2, 3, 4].map((x, i) => (\r\n                    <Grid item key={i}>\r\n                        <Skeleton variant=\"rect\" width={210} height={400} />\r\n                    </Grid>\r\n                ))}\r\n            </Grid>\r\n        </Box>\r\n    )\r\n\r\n    return (\r\n        <Grid spacing={2} mt={3}>\r\n            <Box>\r\n                <Typography variant=\"h6\">{searchResult ? 'Search Results' : 'Recomended Books'}</Typography>\r\n                <Divider />\r\n            </Box>\r\n            {(authIsInitialised && isInitialised) ? renderBooks() : renderSkeleton()}\r\n            <Box>\r\n                <Typography variant=\"h6\">Your Books</Typography>\r\n                <Divider />\r\n            </Box>\r\n            {(authIsInitialised && isInitialised) ? renderMyBooks() : renderSkeleton()}\r\n        </Grid >\r\n\r\n    )\r\n}\r\n\r\nexport default Home;","import { Accordion, AccordionDetails, AccordionSummary, Box, Button, CardMedia, Grid, IconButton, Typography } from '@material-ui/core'\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport React from 'react'\r\n\r\nconst BookAccordion = ({ open, book, handleChange, handleEdit, handleDelete }) => {\r\n    const { name, publisher, description, author, _id } = book\r\n    return (\r\n        <Accordion onChange={handleChange(book._id)} expanded={open}>\r\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n                <Typography variant=\"subtitle2\">{book.name}</Typography>\r\n            </AccordionSummary>\r\n            <AccordionDetails>\r\n                <Grid container spacing={2}>\r\n                    <Grid item>\r\n                        <Box>\r\n                            <img src={book.cover} style={{ maxHeight: 128 }} />\r\n                        </Box>\r\n                    </Grid>\r\n                    <Grid item xs={10}>\r\n                        <Box>\r\n                            <Typography>{description}</Typography>\r\n                        </Box>\r\n                        <Box>\r\n                            <Typography style={{ fontSize: 10 }} variant=\"body2\" color=\"textSecondary\">\r\n                                PUBLISHED BY: {publisher}\r\n                            </Typography>\r\n                            <Typography gutterBottom variant=\"overline\">\r\n                                {author?.name}\r\n                            </Typography>\r\n                        </Box>\r\n                        <Box>\r\n                            <IconButton size=\"small\" onClick={() => handleEdit(_id)}><EditIcon size=\"small\" /></IconButton>\r\n                            <IconButton size=\"small\" onClick={() => handleDelete(_id)} color=\"action\"><DeleteIcon /></IconButton>\r\n                        </Box>\r\n                    </Grid>\r\n                </Grid>\r\n            </AccordionDetails>\r\n        </Accordion>\r\n    )\r\n}\r\n\r\nexport default BookAccordion;","import { Box, Button, Dialog, DialogActions, DialogContent, DialogTitle, Typography } from '@material-ui/core';\r\nimport React from 'react';\r\n\r\nconst ConfirmationDialog = ({ handleChoice, open, book }) => {\r\n    return (\r\n        <Dialog open={open}>\r\n            <Box p={3}>\r\n                <DialogTitle>\r\n                    Cofirm\r\n                </DialogTitle>\r\n                <DialogContent>\r\n                    <Typography variant=\"subtitle1\">Are you sure that you want to <b>DELETE</b> {book?.name}</Typography>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={() => handleChoice(false)}>Cancel</Button>\r\n                    <Button onClick={() => handleChoice(true)}>Confirm</Button>\r\n                </DialogActions>\r\n            </Box>\r\n        </Dialog>\r\n    )\r\n}\r\n\r\nexport default ConfirmationDialog;","import React, { useContext, useEffect, useState } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport { Box, InputAdornment } from '@material-ui/core';\r\nimport { Formik, Form } from 'formik';\r\nimport { FormikTextField } from 'formik-material-fields';\r\nimport BooksContext from '../../context/Books';\r\n\r\n\r\nexport const NewEditBook = ({ book, show, toggleShow }) => {\r\n    const [initialValues, setInitialValues] = useState({})\r\n    const [_id, setId] = useState()\r\n\r\n    const { updateBook, createBook } = useContext(BooksContext)\r\n\r\n    useEffect(() => {\r\n        const initialValues = {\r\n            name: book ? book.name : '',\r\n            description: book ? book.description : '',\r\n            author: book ? book.author : '',\r\n            publisher: book ? book.publisher : '',\r\n            price: book ? book.price : '',\r\n            cover: book ? book.cover : ''\r\n        }\r\n        setId(book ? book._id : undefined)\r\n        setInitialValues(initialValues)\r\n    }, [book])\r\n\r\n    const handleClose = () => {\r\n        toggleShow()\r\n        setInitialValues(undefined)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Dialog maxWidth=\"lg\" open={show} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\r\n                <Formik\r\n                    initialValues={initialValues}\r\n                    validate={values => {\r\n                        const errors = {};\r\n                        if (!values.name) {\r\n                            errors.name = 'Required';\r\n                        }\r\n                        if (!values.description) {\r\n                            errors.description = 'Required';\r\n                        }\r\n                        if (!values.author) {\r\n                            errors.author = 'Required';\r\n                        }\r\n                        if (!values.publisher) {\r\n                            errors.publisher = 'Required';\r\n                        }\r\n                        if (!values.price) {\r\n                            errors.price = 'Required';\r\n                        }\r\n                        if (!values.cover) {\r\n                            errors.cover = 'Required';\r\n                        }\r\n                        return errors;\r\n                    }}\r\n                    onSubmit={async (values, { setSubmitting }) => {\r\n\r\n                        try {\r\n                            if (_id) await updateBook({ _id, values })\r\n                            else await createBook({ values })\r\n                            setSubmitting(false)\r\n                            toggleShow()\r\n                        } catch (e) {\r\n                            console.error(e)\r\n                        }\r\n\r\n                        handleClose()\r\n                    }}\r\n                >{({\r\n                    values,\r\n                    errors,\r\n                    touched,\r\n                    handleChange,\r\n                    handleBlur,\r\n                    handleSubmit,\r\n                    isSubmitting,\r\n                    /* and other goodies */\r\n                }) => (\r\n                    <Box>\r\n                        <DialogTitle id=\"form-dialog-title\">{book ? 'EDIT' : 'NEW BOOK'}</DialogTitle>\r\n                        <Box p={3}>\r\n                            <DialogContent style={{ width: 500 }}>\r\n\r\n                                <Form onSubmit={handleSubmit}>\r\n                                    <Box>\r\n                                        <TextField\r\n                                            autoFocus\r\n                                            error={errors.name}\r\n                                            id=\"name\"\r\n                                            name=\"name\"\r\n                                            label=\"Book Name\"\r\n                                            type=\"text\"\r\n                                            value={values.name}\r\n                                            fullWidth\r\n                                            multiline\r\n                                            onChange={handleChange}\r\n                                        />\r\n                                    </Box>\r\n                                    <Box>\r\n                                        <TextField\r\n                                            multiline\r\n                                            error={errors.description}\r\n                                            margin=\"dense\"\r\n                                            name=\"description\"\r\n                                            id=\"description\"\r\n                                            label=\"Description\"\r\n                                            type=\"text\"\r\n                                            fullWidth\r\n                                            value={values.description}\r\n                                            onChange={handleChange}\r\n                                        />\r\n                                    </Box>\r\n                                    <Box>\r\n                                        <TextField\r\n                                            margin=\"dense\"\r\n                                            error={errors.author}\r\n                                            id=\"author\"\r\n                                            name=\"author\"\r\n                                            label=\"Author\"\r\n                                            type=\"text\"\r\n                                            fullWidth\r\n                                            value={values.author}\r\n                                            onChange={handleChange}\r\n                                        />\r\n                                    </Box>\r\n                                    <Box>\r\n                                        <TextField\r\n                                            margin=\"dense\"\r\n                                            id=\"publisher\"\r\n                                            error={errors.publisher}\r\n                                            name=\"publisher\"\r\n                                            label=\"Publisher\"\r\n                                            type=\"text\"\r\n                                            fullWidth\r\n                                            value={values.publisher}\r\n                                            onChange={handleChange}\r\n                                        />\r\n                                    </Box>\r\n                                    <Box>\r\n                                        <TextField\r\n                                            margin=\"dense\"\r\n                                            error={errors.price}\r\n                                            id=\"price\"\r\n                                            name=\"price\"\r\n                                            label=\"Price\"\r\n                                            type=\"text\"\r\n                                            startAdornment={<InputAdornment position=\"start\">$</InputAdornment>}\r\n                                            fullWidth\r\n                                            value={values.price}\r\n                                            onChange={handleChange}\r\n                                        />\r\n                                    </Box>\r\n                                    <Box>\r\n                                        <TextField\r\n                                            margin=\"dense\"\r\n                                            error={errors.cover}\r\n                                            name=\"cover\"\r\n                                            id=\"cover\"\r\n                                            label=\"Cover\"\r\n                                            fullWidth\r\n                                            type=\"text\"\r\n                                            style={{ flex: 1 }}\r\n                                            value={values.cover}\r\n                                            onChange={handleChange}\r\n                                            helperText=\"Image URL\"\r\n                                        />\r\n                                    </Box>\r\n                                </Form>\r\n                            </DialogContent>\r\n                        </Box>\r\n                        <Box pt={3}>\r\n                            <DialogActions>\r\n                                <Button onClick={toggleShow} color=\"primary\">\r\n                                    Cancel\r\n                        </Button>\r\n                                <Button onClick={handleSubmit} color=\"primary\">\r\n                                    Submit\r\n                        </Button>\r\n                            </DialogActions>\r\n                        </Box>\r\n                    </Box>)}\r\n                </Formik>\r\n            </Dialog>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default NewEditBook;","import { Typography, Grid, Box, Divider, Accordion, Button } from '@material-ui/core'\r\nimport React, { useContext, useState } from 'react'\r\nimport api from '../api'\r\nimport BookAccordion from '../components/BookAccordion'\r\nimport ConfirmationDialog from '../components/ConfirmationDialog'\r\nimport NewEditBook from '../components/NewEditBook'\r\nimport BooksContext from '../context/Books'\r\nimport AddIcon from '@material-ui/icons/Add';\r\n\r\nconst AdminPage = () => {\r\n    const { allBookIDs, booksByIDs, deleteBook } = useContext(BooksContext)\r\n    const [expanded, setExpanded] = useState()\r\n    const [showEdit, setShowEdit] = useState(false)\r\n    const [editBook, setEditBook] = useState()\r\n    const [showDeleteConfirmation, setShowDeleteConfirmaion] = useState()\r\n\r\n\r\n    const handleChange = (panel) => (event, isExpanded) => {\r\n        setExpanded(isExpanded ? panel : false);\r\n    };\r\n\r\n    const handleEdit = (bookId) => {\r\n        if (bookId) {\r\n            setEditBook(booksByIDs[bookId])\r\n        } else setEditBook()\r\n        toggleShow()\r\n    }\r\n\r\n\r\n    const handleDelete = (bookId) => {\r\n        if (bookId) {\r\n            setEditBook(booksByIDs[bookId])\r\n            setShowDeleteConfirmaion(true)\r\n        } else setEditBook()\r\n    }\r\n\r\n    const handleConfirmationChoice = (choice) => {\r\n        if (choice) deleteBook(editBook);\r\n        setShowDeleteConfirmaion(false)\r\n        setEditBook()\r\n    }\r\n\r\n    const toggleShow = () => {\r\n        if (showEdit) setEditBook(undefined)\r\n        setShowEdit(!showEdit)\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n            <Box display=\"flex\" style={{ flexDirection: 'row', justifyContent: 'space-between' }} p={3}>\r\n                <Box>\r\n                    <Typography variant=\"h6\">Admin</Typography>\r\n                </Box>\r\n                <Button startIcon={<AddIcon />} onClick={() => { handleEdit(false) }}>Add New</Button>\r\n            </Box>\r\n            <Divider />\r\n            <Box p={3}>\r\n                {allBookIDs && allBookIDs.map(id =>\r\n                    <BookAccordion key={id} open={expanded === id} handleDelete={handleDelete} handleEdit={handleEdit} handleChange={handleChange} book={booksByIDs[id]} />\r\n                )}\r\n            </Box>\r\n            {showEdit && <NewEditBook book={editBook} show={showEdit} toggleShow={toggleShow} />}\r\n            {showDeleteConfirmation && <ConfirmationDialog open={showDeleteConfirmation} handleChoice={handleConfirmationChoice} book={editBook} />}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AdminPage","import { Container } from '@material-ui/core';\nimport Header from './components/Header';\nimport LoginModal from './components/Loginodal';\nimport AuthContext, { AuthProvider } from './context/Auth';\nimport { BooksProvider } from './context/Books';\nimport { Skeleton } from '@material-ui/lab';\nimport Home from './pages/Home';\nimport {\n  Switch,\n  Route,\n  Redirect\n} from \"react-router-dom\";\nimport AdminPage from './pages/Admin';\nimport { useContext } from 'react';\n\n\n\nconst AdminRoute = ({ children, ...rest }) => {\n  const { isAuthenticated, user, isInitialised } = useContext(AuthContext);\n  return (\n    <>\n      {isInitialised ? <Route\n        {...rest}\n        render={({ location }) =>\n          (isAuthenticated && user?.admin) ? (\n            children\n          ) : (\n            <Redirect\n              to={{\n                pathname: \"/\",\n                state: { from: location }\n              }}\n            />\n          )\n        }\n      /> : <Skeleton variant=\"rect\" width={210} height={118} />}\n    </>\n  )\n}\n\n\nfunction App() {\n  return (\n    <AuthProvider>\n      <BooksProvider>\n        <Header />\n        <Container maxWidth=\"lg\">\n          <Switch>\n            <AdminRoute path=\"/admin\">\n              <AdminPage />\n            </AdminRoute>\n            <Route path=\"/\">\n              <Home />\n            </Route>\n          </Switch>\n        </Container>\n        <LoginModal />\n      </BooksProvider>\n    </AuthProvider >\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core'\nimport {\n  BrowserRouter as Router,\n} from \"react-router-dom\";\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: \"#5DB446\" // Code Oasis Primary color\n    },\n  },\n});\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <ThemeProvider theme={theme}>\n      <Router>\n        <App />\n      </Router>\n    </ThemeProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}